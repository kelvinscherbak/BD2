DROP DATABASE IF EXISTS BANCO;
CREATE DATABASE BANCO;

USE BANCO;

CREATE TABLE ESTADO(
ID INT AUTO_INCREMENT
,NOME VARCHAR (255) NOT NULL
,SIGLA CHAR(2) NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP 
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONSTRAINT PK_ESTADO PRIMARY KEY(ID)
);

CREATE TABLE CIDADE(
ID INT AUTO_INCREMENT
,NOME VARCHAR(255) NOT NULL
,ESTADO_ID INT NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONSTRAINT PK_CIDADE PRIMARY KEY (ID)
,CONSTRAINT FK_CIDADE_ESTADO FOREIGN KEY (ESTADO_ID) REFERENCES ESTADO (ID)
,CONSTRAINT CIDADE_UNICO UNIQUE(NOME,ESTADO_ID)
);

CREATE TABLE FUNCIONARIO(
ID INT AUTO_INCREMENT
,NOME VARCHAR(255) NOT NULL
,TELEFONE CHAR(14) NOT NULL
,TELEFONE CHAR(14)
,CPF CHAR(14) NOT NULL UNIQUE
,ENDERECO VARCHAR(400) NOT NULL
,NUMERO_ENDERECO CHAR(10) NOT NULL
,EMAIL VARCHAR(255)
,DT_NASC DATE NOT NULL
,CIDADE_ID INT NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONTRAINT PK_FUNCIONARIO PRIMARY KEY (ID)
,CONTRAINT FK_FUNCIONARIO_CIDADE FOREIGN KEY (CIDADE_ID) REFERENCES CIDADE(ID)

);

CREATE TABLE FORNECEDOR(
ID INT AUTO_INCREMENT
,NOME VARCHAR(255) NOT NULL
,DOCUMENTO CHAR(18) NOT NULL
,ENDERECO VARCHAR(400) NOT NULL,
,NUMERO_ENDERECO CHAR(10) NOT NULL
,CIDADE_ID INT NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONTRAINT PK_FORNECEDOR PRIMARY KEY (ID)
,CONSTRAINT FK_FORNECEDOR_CIDADE FOREIGN KEY (CIDADE_ID) REFERENCES CIDADE(ID)
);


CREATE TABLE CLIENTE(
ID INT AUTO_INCREMENT
,NOME VARCHAR(255) NOT NULL
,DOCUMENTO CHAR(18) NOT NULL
,ENDERECO VARCHAR(400) NOT NULL,
,NUMERO_ENDERECO CHAR(10) NOT NULL
,CIDADE_ID INT NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONTRAINT PK_CLIENTE PRIMARY KEY (ID)
,CONSTRAINT FK_CLIENTE_CIDADE FOREIGN KEY (CIDADE_ID) REFERENCES CIDADE(ID)
);



CREATE TABLE CATEGORIA(
ID INT AUTO_INCREMENT
,NOME VARCHAR(255) NOT NULL
,DESCRICAO VARCHAR(255) NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONTRAINT PK_CATEGORIA PRIMARY KEY (ID)
);

CREATE TABLE PRODUTOS(
ID INT AUTO_INCREMENT
,NOME VARCHAR(255) NOT NULL
,DESCRICAO VARCHAR(255) NOT NULL
,PRECO DECIMAL(5,2) NOT NULL
,ESTOQUE INT NOT NULL
,CATEGORIA_ID INT NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONSTRAINT PK_PRODUTOS PRIMARY KEY (ID)
,CONSTRAINT FK_CATEGORIA_PRODUTOS FOREIGN KEY (CATEGORIA_ID) REFERENCES CATEGORIA(ID)
);

CREATE TABLE VENDA(
ID INT NOT NULL
,FUNCIONARIO_ID INT NOT NULL
,CLIENTE_ID INT NOT NULL
,VALOR DECIMAL(5,2) NOT NULL
,DESCONTO INT NOT NULL
,TOTAL DECIMAL(5,2) NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONSTRAINT PK_VENDA PRIMARY KEY(ID)
,CONTRAINT FK_VENDA_FUNCIONARIO FOREIGN KEY (FUNCIONARIO_ID) REFERENCES FUNCIONARIO(ID)
,CONSTRAINT FK_VENDA_CLIENTE FOREIGN KEY (CLIENTE_ID) REFERENCES CLIENTE(ID)

);

CREATE TABLE VENDA_ITEM(
ID INT AUTO_INCREMENT
,VENDA_ID INT NOT NULL
,PRODUTO_ID INT NOT NULL
,QUANTIDADE INT NOT NULL
,PRECO DECIMAL(5,2) NOT NULL
,VALOR DECIMAL(5,2) NOT NULL
,DESCONTO INT NOT NULL
,TOTAL DECIMAL(5,2) NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONSTRAINT PK_VENDA_PRODUTO PRIMARY KEY(VENDA_ID,PRODUTO_ID)
,CONSTRAINT FK_VENDA_ITEM_VENDA FOREIGN KEY (VENDA_ID) REFERENCES VENDA(ID)
,CONSTRAINT FK_VENDA_ITEM_PRODUTO FOREIGN KEY (PRODUTO_ID) REFERENCES PRODUTO(ID)
);

CREATE TABLE CAIXA(
ID INT AUTO_INCREMENT
,FUNCIONARIO_ID INT NOT NULL
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONTRAINT PK_CAIXA PRIMARY KEY (ID)
,CONSTRAINT FK_FUNCIONARIO_CAIXA FOREIGN KEY (FUNCIONARIO_ID) REFERENCES FUNCIONARIO(ID)

);


CREATE TABLE CAIXA_ITEM(
ID INT AUTO_INCREMENT
,DESCRICAO VARCHAR(255) NOT NULL
,NATUREZA VARCHAR(255) NOT NULL
,VALOR DECIMAL(5,2) NOT NULL
,DATA_CADASTRO DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP
,STATUS CHAR(1) NOT NULL DEFAULT 'A'
,CONTRAINT PK_CAIXA_ITEM PRIMARY KEY (ID)
,CONSTRAINT FK_
);




CREATE TABLE (
ID
);


CREATE TABLE (
ID
);
